## P1 操作系统的概念、功能

### 操作系统的概念（定义）
1. 操作系统是系统资源的管理者；
2. 向上层提供方便易用的服务；
3. 是最接近硬件的一层软件。

### 作为系统资源的管理者
提供的功能——处理机管理（进程被CPU处理）、存储器管理（把程序放入内存）、文件管理（打开文件夹，找到QQ）、设备管理（分配摄像头、麦克风等）
目标：**安全，高效**

### 向上层提供方便易用的服务
把丑陋的硬件功能（二进制指令）封装成简单易用的服务
- GUI:图形化用户接口
- 联机命令接口 = 交互式命令接口（如cmd.exe，用户说一句，系统跟着做一句）
- 脱机命令接口 = 批处理命令接口（.bat文件，用户说一堆，系统做一堆）
- 程序接口：通过系统调用来使用程序接口，**普通用户不能直接使用**，只能通过程序代码使用（程序员->C语言库函数->程序接口，由一系列系统调用组成，类似函数调用）
命令接口+程序接口 = 用户接口

### 作为最接近硬件的层次
没有软件——裸机；覆盖了软件——扩充机器、虚拟机
操作系统将硬件合理地组合起来，协调运作

## P2 操作系统的四个特征

并发、共享（最基本的两个，互为存在条件）、虚拟、异步

### 并发
多个事件在同一时间间隔内发生，**宏观上同时、微观上交替**
与并行区分：多个时间同时发生

操作系统伴随“多道程序技术”出现，操作系统和程序并发一起诞生

单核CPU同时执行一个程序，只能并发；
多核CPU同时执行多个程序，可以并行，几核CPU就能并行执行几个程序（但也需要并发）

### 共享
资源供给多个并发进程共同使用
- 互斥共享：可以给多个，但同时给一个——摄像头只能给qq微信中的一个
- 同时共享：允许“同时”多个进行访问——发送文件，qq微信交替访问硬盘资源
可能并不是真的同时（分时共享），微观上交替
也可能是真的同时（游戏、音乐同时播放）

如果失去并发性，则共享性失去存在的意义
如果失去共享性，也无法并发 —— 互为存在条件

### 虚拟
把物理上的实体对应为若干个逻辑上的对应物
物理上只有4GB内存，在用户看来远远大于4GB（虚拟存储器，空分复用技术）
物理上只有1个CPU，在用户看来有多个CPU同时服务（虚拟处理器，时分复用技术）
如果失去了并发性，则失去了实现虚拟性的意义

### 异步
进程的执行走走停停，以不可预知的速度向前推进
并发的程序争抢使用有限的资源，可能需要等待（阻塞）
有并发性，才有可能有异步性

## 操作系统的发展和分类

### 手工操作阶段

手工制作纸带机（极慢），计算机读取纸带机（慢），计算（快），打印纸带机（慢），程序员阅读（极慢）
主要缺点：用户独占全机，人机速度矛盾导致资源利用率极低

### 批处理阶段——单道批处理系统

引入脱机输入输出技术（用外围机+磁带完成），由监督程序负责控制作业的输入输出（操作系统的雏形）
主要优点：缓解了一定的人机速度矛盾
主要缺点：程序串行执行，CPU大量时间等待

### 批处理阶段——多道批处理系统

每次往内存中读入多道程序，操作系统正式诞生，用于支持多道程序并发运行